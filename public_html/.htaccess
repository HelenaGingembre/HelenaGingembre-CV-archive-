Options +FollowSymLinks
IndexIgnore */*

RewriteEngine on RewriteBase /

# If a directory or a file exists, use it directly

RewriteCond %{HTTP:X-Forwarded-Proto} !https
RewriteRule (.*) https://%{HTTP_HOST}%{REQUEST_URI} [R=301,L]

#ЕСЛИ [сайт набран с www] ТО [открыть страницу без www]. 
RewriteCond %{HTTP_HOST} ^www\.helenizotova\.ru [NC]
RewriteCond %{SERVER_PORT} 80
RewriteRule ^(.*)$ https://helenizotova.ru/$1 [R,L]

# Если файл или каталог не существует, идём к index.html
RewriteCond %{REQUEST_FILENAME} !-f
RewriteCond %{REQUEST_FILENAME} !-d
# Otherwise forward it to index.php
RewriteRule . index.html

#Убираем расширение файла из URL
RewriteRule ^(([^/]+/)*[^.]+)$ /$1.html [L]

#Запрещаем загрузку файлов с внешних сайтов
RewriteEngine On
RewriteCond %{HTTP_REFERER} !^$
RewriteCond %{HTTP_REFERER} !^https://(www.)?helenizotova.ru/ [nc]
RewriteRule .*.(gif|jpg|png)$ http://helenizotova.ru/img/no-image.png[nc]